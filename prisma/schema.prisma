generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Gender {
  MALE
  FEMALE
}

model Users {
  id               Int       @id @unique @default(autoincrement())
  uid              String    @unique @default(uuid())
  mobile           String?   @unique @db.VarChar(11)
  email            String    @unique @db.VarChar(100)
  password         String
  mobileVerifiedAt DateTime? @map("mobile_verified_at")
  emailVerifiedAt  DateTime? @map("email_verified_at")
  lastLogin        DateTime? @map("last_login")
  isActive         Boolean   @default(true) @map("is_active")
  createdAt        DateTime  @default(now()) @map("created_at")
  updatedAt        DateTime  @updatedAt @map("updated_at")
  Profile          Profile?

  @@map("users")
}

model Profile {
  id                 Int       @id @unique @default(autoincrement())
  userId             Int       @unique @map("user_id")
  User               Users     @relation(fields: [userId], references: [id], onDelete: Cascade)
  firstName          String?   @map("first_name") @db.VarChar(50)
  lastName           String?   @map("last_name") @db.VarChar(50)
  birthday           DateTime?
  lastChangeBirthday DateTime? @map("last_change_birthday")
  gender             Gender    @default(MALE)
  avatarId           Int?      @unique @map("avatar_id")
  Avatar             Files?    @relation(fields: [avatarId], references: [id], onDelete: SetNull)
  createdAt          DateTime  @default(now()) @map("created_at")
  updatedAt          DateTime  @updatedAt @map("updated_at")

  @@map("profile")
}

model Files {
  id           Int      @id @unique @default(autoincrement())
  name         String?  @db.VarChar(100)
  descriptions String?  @db.VarChar(100)
  bucketName   String?  @map("bucket_name") @db.VarChar(100)
  objectName   String?  @map("object_name") @db.VarChar(100)
  url          String?  @map("url") @db.VarChar(500)
  path         String?  @db.VarChar(100)
  extension    String?  @db.VarChar(10)
  size         Int?
  disk         String   @default("local") @db.VarChar(100)
  isActive     Boolean  @default(true) @map("is_active")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  Profile      Profile?

  @@map("files")
}
